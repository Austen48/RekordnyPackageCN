#黑森峰-政府
kga_government = {

	##########以下为KGA测试
	test_war = {
		allowed = { tag = KGA }
		visible = { is_debug = yes }
		days_re_enable = 1
		complete_effect = {
			declare_war_on = {
				target = STG
				type = annex_everything
			}
			declare_war_on = {
				target = SDS
				type = annex_everything
			}
			declare_war_on = {
				target = BCF
				type = annex_everything
			}
		}
	}
	test_peace = {
		allowed = { tag = KGA }
		visible = { is_debug = yes }
		days_re_enable = 1
		complete_effect = {
			white_peace_with_every_enemy = yes
		}
		
	}
	##########以上为测试

    kga_pay_gold = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_atonement NOT = { has_country_flag = kga_paid_debt } } }
		
		days_re_enable = 80
		custom_cost_trigger = {
			check_variable = { gold > 69.9 }
	   	}
		custom_cost_text = kga_tooltip3
		complete_effect = {
			KGA = { add_to_variable = { gold = -70 } }
			STG = { add_to_variable = { gold = 30 } }
			BCF = { add_to_variable = { gold = 30 } }
			if = { limit = { has_idea = KGA_huge_debt } swap_ideas = { remove_idea = KGA_huge_debt  add_idea = KGA_huge_debt_1 } }
			else_if = { limit = { has_idea = KGA_huge_debt_1 } swap_ideas = { remove_idea = KGA_huge_debt_1  add_idea = KGA_huge_debt_2 } }
			else_if = { limit = { has_idea = KGA_huge_debt_2 } swap_ideas = { remove_idea = KGA_huge_debt_2  add_idea = KGA_huge_debt_3 } }
			else_if = { limit = { has_idea = KGA_huge_debt_3 } swap_ideas = { remove_idea = KGA_huge_debt_3  add_idea = KGA_huge_debt_4 } }
			else_if = { limit = { has_idea = KGA_huge_debt_4 } remove_ideas = KGA_huge_debt_4 set_country_flag = kga_paid_debt KGA = { country_event = kuromorimine.9 } }
		}
	}
	kga_industry_repayment_bonds = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_industry_repayment_bonds NOT = { has_country_flag = kga_paid_debt } } }
		available = { has_political_power > 79 }
		days_re_enable = 100
		complete_effect = {
			add_offsite_building = { type = industrial_complex level = 1 }
			add_political_power = -80
		}
	}
	kga_remove_bellwall_threat = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_stablize_senshado_military_government NOT = { has_country_flag = start_kga_prepare_civil_war_mission } } }
		fire_only_once = yes
		complete_effect = {
			KGA = {
				country_event = { id = kuromorimine.24 days = 0 }
			}
		}
	}
}

#黑森峰-外交
kga_diplomatic = {
	kga_improve_relationship_vik = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_approch_new_senshado_union country_exists = VIK } }
		available = { AND = { NOT = { has_war_with = VIK } country_exists = VIK } }
		fire_only_once = yes
		custom_cost_trigger = {
			check_variable = { gold > 34.9 }
	   	}
		custom_cost_text = kga_tooltip16
		complete_effect = {
			add_to_variable = { gold = -35 }
			add_opinion_modifier = {
				target = VIK
				modifier = financial_support
			}
			add_political_power = 50
		}
	}
	kga_improve_relationship_ghs = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_approch_new_senshado_union country_exists = GHS } }
		available = { AND = { NOT = { has_war_with = GHS } country_exists = GHS } }
		fire_only_once = yes
		custom_cost_trigger = {
			check_variable = { gold > 34.9 }
	   	}
		custom_cost_text = kga_tooltip16
		complete_effect = {
			add_to_variable = { gold = -35 }
			add_opinion_modifier = {
				target = GHS
				modifier = financial_support
			}
			add_political_power = 50
		}
	}
	kga_improve_relationship_cou = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_approch_new_senshado_union country_exists = COU } }
		available = { AND = { NOT = { has_war_with = COU } country_exists = COU } }
		fire_only_once = yes
		custom_cost_trigger = {
			check_variable = { gold > 34.9 }
	   	}
		custom_cost_text = kga_tooltip16
		complete_effect = {
			add_to_variable = { gold = -35 }
			add_opinion_modifier = {
				target = COU
				modifier = financial_support
			}
			add_political_power = 50
		}
	}
	kga_improve_relationship_yog = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_approch_new_senshado_union country_exists = YOG } }
		available = { AND = { NOT = { has_war_with = YOG } country_exists = YOG } }
		fire_only_once = yes
		custom_cost_trigger = {
			check_variable = { gold > 34.9 }
	   	}
		custom_cost_text = kga_tooltip16
		complete_effect = {
			add_to_variable = { gold = -35 }
			add_opinion_modifier = {
				target = YOG
				modifier = financial_support
			}
			add_political_power = 50
		}
	}
	kga_improve_relationship_keb = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_approch_new_senshado_union country_exists = KEB } }
		available = { AND = { NOT = { has_war_with = KEB } country_exists = KEB } }
		fire_only_once = yes
		custom_cost_trigger = {
			check_variable = { gold > 34.9 }
	   	}
		custom_cost_text = kga_tooltip16
		complete_effect = {
			add_to_variable = { gold = -35 }
			add_opinion_modifier = {
				target = KEB
				modifier = financial_support
			}
			add_political_power = 50
		}
	}
}

kga_industry = {
	kga_plan_industrial_land = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_reconstruction_law } }
		days_re_enable = 30
		custom_cost_trigger = {
			check_variable = { political_power > 24.9 }
	   	}
		custom_cost_text = kga_tooltip23
		complete_effect = {
			random_state = {
				limit = { is_core_of = KGA is_controlled_by = KGA }
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	kga_rise_tax_on_consumer_goods = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_reconstruction_law } }
		days_re_enable = 121
		custom_cost_trigger = {
			check_variable = { political_power > 49.9 }
	   	}
		custom_cost_text = kga_tooltip24
		complete_effect = {
			add_timed_idea = {
				idea = KGA_rise_tax_on_consumer_goods
				days = 120
			}
		}
	}
}

#傀儡政府-冯部诺
kga_establish_puppuet_bon = {
	kga_start_infiltration = {
		allowed = { tag = KGA }
		days_re_enable = 70
		visible = { AND = { has_completed_focus = KGA_support_puppet_faction country_exists = BON } }
		available = { AND = { NOT = { has_war_with = BON } fascism < 0.35 } }
		custom_cost_trigger = {
			check_variable = { gold > 49.9 }
	   	}
		custom_cost_text = kga_tooltip17
		complete_effect = {
			add_to_variable = { gold = -50 }
			BON = { add_timed_idea = { idea = BON_unknown_fascism_rising days = 70 } }
		}
	} 

	kga_control_congressional_seats = {
		allowed = { tag = KGA }
		visible = { AND = { has_completed_focus = KGA_support_puppet_faction country_exists = BON } }
		available = { AND = { NOT = { has_war_with = BON } fascism > 0.35 } }
		custom_cost_trigger = {
			has_political_power > 199.9
	   	}
		custom_cost_text = kga_tooltip18
		fire_only_once = yes
		complete_effect = {
			country_event = { id = kuromorimine.53 days = 0 }
		}
	}

	kga_support_bkc = {
		visible = { country_exists = BKC }
		allowed = { tag = KGA }
		available = { NOT = { has_war_with = BON } country_exists = BKC }
		custom_cost_trigger = {
			has_political_power > 199.9
	   	}
		custom_cost_text = kga_tooltip18
		complete_effect = {
			add_to_war = { 
				targeted_alliance = BKC 
				enemy = BON 
				hostility_reason = asked_to_join
			}
			BKC = { add_equipment_to_stockpile = {
				type = senshado_light_tank_equipment_2
				amount = 100
				producer = KGA
			} }
			68 = {
				add_building_construction = {
					type = senshado_school
					level = 1
					instant_build = yes
				}
			}
			68 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			63 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			66 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

}

#黑森峰-任务
kga_missions = {
	#黑森峰基建任务
	kga_build_infrastructures = {
		allowed = { tag = KGA }
		available = {
			61 = { infrastructure > 7 }
			62 = { infrastructure > 7 }
			60 = { infrastructure > 7 }
			64 = { infrastructure > 7 }
			65 = { infrastructure > 7 }
			54 = { infrastructure > 7 }
			55 = { infrastructure > 7 }
			53 = { infrastructure > 7 }
			52 = { infrastructure > 7 }
		}
		is_good = no
		activation = { has_country_flag  = start_kga_infrastructure_mission } 
		days_mission_timeout = 365
		complete_effect = {
			custom_effect_tooltip = kga_tooltip2
			hidden_effect = {
				if = { limit = {date < 1974.6.30} add_ssdp_50 = yes add_stability = 0.1 }
				add_ssdp_300 = yes
				clr_country_flag  = start_kga_infrastructure_mission
			}
			
		}
	}
	
}

#黑森峰-备战内战
kga_civil_war = {
	#获得萨克森支持
	kga_add_support_65 = {
		visible = { has_country_flag = start_kga_prepare_civil_war_mission }
		allowed = { tag = KGA }
		available = { fascism > 0.55 }
		custom_cost_trigger = {
			has_political_power > 79.9
	   	}
		custom_cost_text = kga_tooltip5
		complete_effect = {
			add_political_power = -80
			set_country_flag = kga_has_65_support_civil_war
		}
		fire_only_once = yes
	}
	#炸毁对手基建
	kga_deploy_bomb = {
		visible = { has_country_flag = start_kga_prepare_civil_war_mission }
		available = { has_intelligence_agency = yes }
		allowed = { tag = KGA }
		complete_effect = {
			set_country_flag = kga_has_deployed_bomb_civil_war
		}
		fire_only_once = yes
	}
	#获得FRA支持内战
	kga_ask_support_from_BCF = {
		visible = { has_country_flag = start_kga_prepare_civil_war_mission }
		allowed = { tag = KGA }
		available = { OR = { BCF = { has_government = fascism } BCF = { has_government = neutrality } } }
		custom_cost_trigger = {
			has_political_power > 19.9
	   	}
		custom_cost_text = kga_tooltip6
		complete_effect = {
			add_political_power = -20
			set_country_flag = kga_ask_support_from_BCF
		}
		fire_only_once = yes
	}
	#获得STG支持内战
	kga_ask_support_from_STG = {
		visible = { has_country_flag = start_kga_prepare_civil_war_mission }
		allowed = { tag = KGA }
		available = { OR = { STG = { has_government = fascism } STG = { has_government = neutrality } } }
		custom_cost_trigger = {
			has_political_power > 19.9
	   	}
		custom_cost_text = kga_tooltip6
		complete_effect = {
			add_political_power = -20
			set_country_flag = kga_ask_support_from_STG
		}
		fire_only_once = yes
	}
	#秘密扩充军备
	kga_gather_equipments = {
		visible = { has_country_flag = start_kga_prepare_civil_war_mission }
		allowed = { tag = KGA }
		custom_cost_trigger = {
			check_variable = { gold > 39.9 }
	   	}
		custom_cost_text = kga_tooltip7
		complete_effect = {
			KGA = { add_to_variable = { gold = -40 } }
			set_country_flag = kga_has_gathered_equipments
		}
		fire_only_once = yes
	}
	#发起法西斯对钟壁内战
	kga_start_civil_war = {
		visible = { has_country_flag = start_kga_prepare_civil_war_mission }
		allowed = { tag = KGA }
		available = { fascism > 0.3 communism > 0.3 has_civil_war = no }
		complete_effect = {
			country_event = { id = kuromorimine.28 days = 0 }
		}
		fire_only_once = yes
	}
}